
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Up and Testing with Guard and Growl - Defending the Code</title>
  <meta name="author" content="Andrew M. Slack">

  
  <meta name="description" content="Continuing on from my Autotest record I thought it would be instructive to use Guard to achieve something equivalent. Guard is defined as: a command &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://andrewslack.github.com/blog/2013/04/04/up-and-testing-with-guard-and-growl/">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="/blog/javascripts/ender.js"></script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/blog/atom.xml" rel="alternate" title="Defending the Code" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Defending the Code</a></h1>
  
    <h2>My TDD Experiences</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:andrewslack.github.com/blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Up and Testing With Guard and Growl</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-04T12:32:00-06:00" pubdate data-updated="true">Apr 4<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Continuing on from my <a href="../../../02/08/up-and-testing-with-autotest-and-growl/">Autotest record</a> I thought it would be instructive to use <a href="https://github.com/guard">Guard</a> to achieve something equivalent.</p>

<p>Guard is defined as:</p>

<blockquote><p>a command line tool to easily handle events on file system modifications</p></blockquote>

<p>It supports a <a href="https://github.com/guard/guard/wiki/List-of-available-Guards">myriad of plugins</a>.  The one we are interested in is <a href="https://github.com/guard/guard-rspec">guard-rspec</a>.</p>

<p>So add this to your gemfile:</p>

<figure class='code'><figcaption><span>[minimal gemfile] </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source "http://rubygems.org"
</span><span class='line'>
</span><span class='line'>group :development  do
</span><span class='line'>  gem 'guard'
</span><span class='line'>  gem 'guard-rspec'
</span><span class='line'>  gem 'rb-fsevent'
</span><span class='line'>  gem "rspec", :require => "spec"
</span><span class='line'>  gem "growl"
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Now create a Guardfile via</p>

<figure class='code'><figcaption><span>[create initial Gaurdfile (filled with example definitions)] </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ guard init rspec</span></code></pre></td></tr></table></div></figure>


<p>Edit it so that it looks something like this:</p>

<figure class='code'><figcaption><span>[minimal Guardfile] </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>notification :growl
</span><span class='line'>
</span><span class='line'>guard 'rspec' do
</span><span class='line'>  watch(%r{^spec/.+_spec\.rb$})
</span><span class='line'>  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
</span><span class='line'>  watch('spec/spec_helper.rb')  { "spec" }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Now create a spec folder (this is one of the places that are being &#8216;watched&#8217;).  So any changes in the specs (below spec/) or domain code (below lib/) will result in the guard firing (invoking rspec).</p>

<p>All we need to do now is run the guard</p>

<figure class='code'><figcaption><span>[start guard] </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ guard</span></code></pre></td></tr></table></div></figure>


<p>The guard reads the GuardFile and monitors the resources.  Any changes in them i.e. the domain code or tests will invoke the rspec guard.  The results from which are pushed through the notification system, in this case Growl. For Growl to work make sure you have the correct version of growlnotify installed (<a href="http://growl.info/downloads#generaldownloads">download here</a>)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Andrew M. Slack</span></span>

      








  


<time datetime="2013-04-04T12:32:00-06:00" pubdate data-updated="true">Apr 4<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/growl-/'>growl,</a>, <a class='category' href='/blog/categories/guard-/'>guard,</a>, <a class='category' href='/blog/categories/rspec-/'>rspec,</a>, <a class='category' href='/blog/categories/ruby-/'>ruby,</a>, <a class='category' href='/blog/categories/tdd/'>tdd</a>, <a class='category' href='/blog/categories/test-/'>test,</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://andrewslack.github.com/blog/2013/04/04/up-and-testing-with-guard-and-growl/" data-via="" data-counturl="http://andrewslack.github.com/blog/2013/04/04/up-and-testing-with-guard-and-growl/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/03/06/running-mongodb-as-a-mac-osx-daemon/" title="Previous Post: Running Mongodb as a Mac OSX Daemon">&laquo; Running Mongodb as a Mac OSX Daemon</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/04/up-and-testing-with-guard-and-growl/">Up and Testing with Guard and Growl</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/06/running-mongodb-as-a-mac-osx-daemon/">Running Mongodb as a Mac OSX Daemon</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/08/up-and-testing-with-autotest-and-growl/">Up and testing with Autotest and Growl</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/06/getting-jenkins-to-run-on-a-different-port/">Getting Jenkins to run on a different port</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/05/changing-the-code-page-in-windows-to-help-debug-a-utf-8-issue/">Changing the code page in Windows to help debug a UTF-8 issue</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Andrew M. Slack -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
