
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting Jenkins to run on a different port - Defending the Code</title>
  <meta name="author" content="Andrew M. Slack">

  
  <meta name="description" content="The Jenkins launch daemon is defined here: /Library/LaunchDaemons/org.jenkins-ci.plist [JSON] 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://andrewslack.github.com/blog/2013/02/06/getting-jenkins-to-run-on-a-different-port/">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="/blog/javascripts/ender.js"></script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/blog/atom.xml" rel="alternate" title="Defending the Code" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Defending the Code</a></h1>
  
    <h2>My TDD Experiences</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:andrewslack.github.com/blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Getting Jenkins to Run on a Different Port</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-06T10:57:00-07:00" pubdate data-updated="true">Feb 6<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>The Jenkins launch daemon is defined here: /Library/LaunchDaemons/org.jenkins-ci.plist</p>

<figure class='code'><figcaption><span>[JSON] </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?xml version="1.0" encoding="UTF-8"?>
</span><span class='line'>&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
</span><span class='line'>&lt;plist version="1.0">
</span><span class='line'>&lt;dict>
</span><span class='line'>    &lt;key>StandardOutPath&lt;/key>
</span><span class='line'>    &lt;string>/var/log/jenkins/jenkins.log&lt;/string>
</span><span class='line'>    &lt;key>StandardErrorPath&lt;/key>
</span><span class='line'>    &lt;string>/var/log/jenkins/jenkins.log&lt;/string>
</span><span class='line'>  &lt;key>EnvironmentVariables&lt;/key>
</span><span class='line'>  &lt;dict>
</span><span class='line'>      &lt;key>JENKINS_HOME&lt;/key>
</span><span class='line'>      &lt;string>/Users/Shared/Jenkins/Home&lt;/string>
</span><span class='line'>  &lt;/dict>
</span><span class='line'>  &lt;key>GroupName&lt;/key>
</span><span class='line'>  &lt;string>daemon&lt;/string>
</span><span class='line'>  &lt;key>KeepAlive&lt;/key>
</span><span class='line'>  &lt;true/>
</span><span class='line'>  &lt;key>Label&lt;/key>
</span><span class='line'>  &lt;string>org.jenkins-ci&lt;/string>
</span><span class='line'>  &lt;key>ProgramArguments&lt;/key>
</span><span class='line'>  &lt;array>
</span><span class='line'>        &lt;string>/bin/bash&lt;/string>
</span><span class='line'>      &lt;string>/Library/Application Support/Jenkins/jenkins-runner.sh&lt;/string>
</span><span class='line'>  &lt;/array>
</span><span class='line'>  &lt;key>RunAtLoad&lt;/key>
</span><span class='line'>  &lt;true/>
</span><span class='line'>  &lt;key>UserName&lt;/key>
</span><span class='line'>  &lt;string>jenkins&lt;/string>
</span><span class='line'>    &lt;key>SessionCreate&lt;/key>
</span><span class='line'>  &lt;true />
</span><span class='line'>&lt;/dict>
</span><span class='line'>&lt;/plist></span></code></pre></td></tr></table></div></figure>


<p>This kicks off the /Library/Application Support/Jenkins/jenkins-runner.sh script which looks like this:</p>

<figure class='code'><figcaption><span>[jenkins-runner.sh] </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Startup script used by Jenkins launchd job.</span>
</span><span class='line'><span class="c"># Mac OS X launchd process calls this script to customize</span>
</span><span class='line'><span class="c"># the java process command line used to run Jenkins.</span>
</span><span class='line'><span class="c"># </span>
</span><span class='line'><span class="c"># Customizable parameters are found in</span>
</span><span class='line'><span class="c"># /Library/Preferences/org.jenkins-ci.plist</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># You can manipulate it using the &quot;defaults&quot; utility.</span>
</span><span class='line'><span class="c"># See &quot;man defaults&quot; for details.</span>
</span><span class='line'>
</span><span class='line'><span class="nv">defaults</span><span class="o">=</span><span class="s2">&quot;defaults read /Library/Preferences/org.jenkins-ci&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">war</span><span class="o">=</span><span class="sb">`</span><span class="nv">$defaults</span> war<span class="sb">`</span> <span class="o">||</span> <span class="nv">war</span><span class="o">=</span><span class="s2">&quot;/Applications/Jenkins/jenkins.war&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">javaArgs</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">heapSize</span><span class="o">=</span><span class="sb">`</span><span class="nv">$defaults</span> heapSize<span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="nv">javaArgs</span><span class="o">=</span><span class="s2">&quot;$javaArgs -Xmx${heapSize}&quot;</span>
</span><span class='line'><span class="nv">permGen</span><span class="o">=</span><span class="sb">`</span><span class="nv">$defaults</span> permGen<span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="nv">javaArgs</span><span class="o">=</span><span class="s2">&quot;$javaArgs -XX:MaxPermSize=${permGen}&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">home</span><span class="o">=</span><span class="sb">`</span><span class="nv">$defaults</span> JENKINS_HOME<span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="nb">export </span><span class="nv">JENKINS_HOME</span><span class="o">=</span><span class="s2">&quot;$home&quot;</span>
</span><span class='line'>
</span><span class='line'>add_to_args<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="nv">val</span><span class="o">=</span><span class="sb">`</span><span class="nv">$defaults</span> <span class="nv">$1</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="nv">args</span><span class="o">=</span><span class="s2">&quot;$args --${1}=${val}&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">args</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'>add_to_args prefix
</span><span class='line'>add_to_args httpPort
</span><span class='line'>add_to_args httpListenAddress
</span><span class='line'>add_to_args httpsPort
</span><span class='line'>add_to_args httpsListenAddress
</span><span class='line'>add_to_args ajp13Port
</span><span class='line'>add_to_args ajp13ListenAddress
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;JENKINS_HOME=$JENKINS_HOME&quot;</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Jenkins command line for execution:&quot;</span>
</span><span class='line'><span class="nb">echo</span> /usr/bin/java <span class="nv">$javaArgs</span> -jar <span class="s2">&quot;$war&quot;</span> <span class="nv">$args</span>
</span><span class='line'><span class="nb">exec</span> /usr/bin/java <span class="nv">$javaArgs</span> -jar <span class="s2">&quot;$war&quot;</span> <span class="nv">$args</span>
</span></code></pre></td></tr></table></div></figure>


<p>The interesting thing here is that it looks for defaults in /Library/Preferences/org.jenkins-ci.plist.  So if you want to change the port then you need to write an entry into that file.  The command will create the entry (and the file if it does not exist already):</p>

<figure class='code'><figcaption><span>[write a default value for the port] </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo defaults write /Library/Preferences/org.jenkins-ci httpPort 8082</span></code></pre></td></tr></table></div></figure>


<p>Now reload the daemon</p>

<figure class='code'><figcaption><span>[write a default value for the port] </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist
</span><span class='line'>sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist</span></code></pre></td></tr></table></div></figure>


<p>You can check Jenkins&#8217; progress via the log file that the daemon writes to at: /var/log/jenkins/jenkins.log</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Andrew M. Slack</span></span>

      








  


<time datetime="2013-02-06T10:57:00-07:00" pubdate data-updated="true">Feb 6<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/jenkins-/'>jenkins,</a>, <a class='category' href='/blog/categories/launch-/'>launch,</a>, <a class='category' href='/blog/categories/macosx/'>macosx</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://andrewslack.github.com/blog/2013/02/06/getting-jenkins-to-run-on-a-different-port/" data-via="" data-counturl="http://andrewslack.github.com/blog/2013/02/06/getting-jenkins-to-run-on-a-different-port/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/02/05/changing-the-code-page-in-windows-to-help-debug-a-utf-8-issue/" title="Previous Post: Changing the code page in Windows to help debug a UTF-8 issue">&laquo; Changing the code page in Windows to help debug a UTF-8 issue</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/02/08/up-and-testing-with-autotest-and-growl/" title="Next Post: Up and testing with Autotest and Growl">Up and testing with Autotest and Growl &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/04/up-and-testing-with-guard-and-growl/">Up and Testing with Guard and Growl</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/06/running-mongodb-as-a-mac-osx-daemon/">Running Mongodb as a Mac OSX Daemon</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/08/up-and-testing-with-autotest-and-growl/">Up and testing with Autotest and Growl</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/06/getting-jenkins-to-run-on-a-different-port/">Getting Jenkins to run on a different port</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/05/changing-the-code-page-in-windows-to-help-debug-a-utf-8-issue/">Changing the code page in Windows to help debug a UTF-8 issue</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Andrew M. Slack -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
